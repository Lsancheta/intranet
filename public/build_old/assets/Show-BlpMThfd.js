import{r as p,g as x,p as D,b as r,o as l,e as j,d,w as z,a as t,t as n,f as g,F as v,j as h,i as y,u as a,v as w}from"./app-67hBPH9G.js";import O from"./AppLayout-d4VMbLAr.js";const E={class:"max-w-4xl mx-auto mt-10 bg-white shadow-lg rounded-xl p-6"},N={class:"flex justify-between border-b pb-4"},_={class:"text-2xl font-bold"},$={class:"text-right text-sm"},A={class:"mt-6 border-b pb-4"},B={class:"text-left text-sl"},T={class:"text-gray-700"},M={class:"mt-6"},U={class:"w-full border divide-y table-auto"},L={class:"py-2 px-3"},P={class:"py-2 px-3 whitespace-normal break-words break-all max-w-xs"},q={class:"py-2 px-3"},G={key:0,class:"mt-3 text-center"},H={key:0,class:"mt-6"},I={key:1,class:"mt-6"},J={class:"mt-6"},K={class:"grid grid-cols-3 gap-4"},Q=["src"],R={key:0},W={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center"},X={class:"bg-white p-6 rounded-lg shadow-xl w-96"},Y={class:"flex justify-end mt-4"},ot={__name:"Show",props:{ordem:Object},setup(s){const u=p(!1),m=p(!1),i=s,c=x({comentario:""});function k(){c.post(route("ordens.comentario",i.ordem.id),{onSuccess:()=>{c.reset()}})}const f=x({foto:null});function C(){f.post(route("ordens.foto",i.ordem.id),{forceFormData:!0,onSuccess:()=>f.reset()})}function F(){u.value=!0}const b=x({comentario:""});function S(){b.post(route("ordens.finalizar",i.ordem.id),{onSuccess:()=>{u.value=!1,b.reset()}})}const V=D(()=>m.value?i.ordem.comentarios:i.ordem.comentarios.slice(0,4));return(Z,e)=>(l(),r(v,null,[j(O,null,{default:z(()=>[t("div",E,[t("div",N,[t("h1",_," Ordem de Serviço #"+n(s.ordem.id),1),t("div",$,[t("p",null,[e[5]||(e[5]=t("strong",null,"Status:",-1)),g(" "+n(s.ordem.status.nome),1)]),t("p",null,[e[6]||(e[6]=t("strong",null,"Prioridade:",-1)),g(" "+n(s.ordem.prioridade.nome),1)]),t("p",null,[e[7]||(e[7]=t("strong",null,"Data:",-1)),g(" "+n(s.ordem.created_at),1)])])]),t("div",A,[t("div",B,[t("p",null,[e[8]||(e[8]=t("strong",null,"Área:",-1)),g(" "+n(s.ordem.bloco.nome),1)])]),e[9]||(e[9]=t("h2",{class:"font-semibold mb-2 text-lg"},"Descrição",-1)),t("p",T,n(s.ordem.descricao),1)]),t("div",M,[e[11]||(e[11]=t("h2",{class:"font-semibold mb-3 text-lg"},"Comentários",-1)),t("table",U,[e[10]||(e[10]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"py-2 px-3 text-left"},"Funcionário"),t("th",{class:"py-2 px-3 text-left"},"Comentário"),t("th",{class:"py-2 px-3 text-left"},"Data")])],-1)),t("tbody",null,[(l(!0),r(v,null,h(V.value,o=>(l(),r("tr",{key:o.id,class:"border-b border-gray-300"},[t("td",L,n(o.user.name),1),t("td",P,n(o.comentario),1),t("td",q,n(o.created_at),1)]))),128))])]),s.ordem.comentarios.length>4?(l(),r("div",G,[t("button",{onClick:e[0]||(e[0]=o=>m.value=!m.value),class:"text-blue-600 font-semibold hover:underline"},n(m.value?"Ver menos":"Ver todos os Comentários"),1)])):d("",!0)]),s.ordem.status_id!==4?(l(),r("div",H,[e[12]||(e[12]=t("h2",{class:"font-semibold mb-2 text-lg"},"Adicionar Comentário",-1)),y(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=o=>a(c).comentario=o),rows:"4",class:"w-full border rounded-lg p-3",placeholder:"Escreva um comentário..."},null,512),[[w,a(c).comentario]]),t("button",{onClick:k,class:"mt-3 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"}," Enviar Comentário "),t("button",{onClick:F,class:"mt-3 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 ml-3"}," Finalizar OS ")])):d("",!0),s.ordem.status_id!==4?(l(),r("div",I,[e[13]||(e[13]=t("h2",{class:"font-semibold mb-2 text-lg"},"Adicionar Foto",-1)),t("input",{type:"file",onChange:e[2]||(e[2]=o=>a(f).foto=o.target.files[0]),class:"w-full border rounded-lg p-2"},null,32),t("button",{onClick:C,class:"mt-3 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"}," Enviar Foto ")])):d("",!0),t("div",J,[e[14]||(e[14]=t("h2",{class:"text-lg font-semibold mb-2"},"Fotos",-1)),t("div",K,[(l(!0),r(v,null,h(s.ordem.fotos,o=>(l(),r("div",{key:o.id,class:"border rounded-lg overflow-hidden shadow-sm hover:shadow-lg"},[t("img",{src:`/storage/${o.caminho}`,class:"w-full h-50 object-cover transition-transform duration-300 hover:scale-130 cursor-pointer"},null,8,Q)]))),128))])])])]),_:1}),s.ordem.status_id!==4?(l(),r("div",R,[u.value?(l(),r("div",W,[t("div",X,[e[15]||(e[15]=t("h2",{class:"text-xl font-semibold mb-3"},"Finalizar OS",-1)),y(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=o=>a(b).comentario=o),rows:"4",class:"w-full border rounded-lg p-3",placeholder:"Digite o comentário final..."},null,512),[[w,a(b).comentario]]),t("div",Y,[t("button",{onClick:e[4]||(e[4]=o=>u.value=!1),class:"bg-gray-400 text-white px-4 py-2 rounded-lg hover:bg-gray-500 mr-2"}," Cancelar "),t("button",{onClick:S,class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Concluir ")])])])):d("",!0)])):d("",!0)],64))}};export{ot as default};
