import{b as c,o as l,a as t,s as k,r as y,c as p,w as i,d as S,F as _,j as h,e as u,u as f,l as x,f as g,t as o,x as m,y as v}from"./app-D91oiFWV.js";import $ from"./AppLayout-BWQ64fhv.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import N from"./FormCreateOS-2wQLnmEV.js";const z={},B={class:"fixed inset-0 bg-black/50 flex items-center justify-center"},O={class:"bg-white rounded-lg p-6 relative min-w-[400px]"};function V(d,a){return l(),c("div",B,[t("div",O,[t("button",{class:"absolute top-2 right-2 text-gray-600",onClick:a[0]||(a[0]=r=>d.$emit("close"))}," ✖ "),k(d.$slots,"default")])])}const A=C(z,[["render",V]]),F={class:"flex justify-between items-center"},D={class:"flex gap-3"},P={class:"p-6"},E={class:"hidden md:block"},I={class:"w-full bg-white text-black shadow rounded-lg overflow-hidden"},L={class:"py-2 px-4"},M={class:"py-2 px-4"},T={class:"py-2 px-4"},q={class:"py-2 px-4"},G={class:"py-2 px-4"},H={class:"py-2 px-4"},J={class:"py-2 px-4"},K={class:"py-2 px-4"},Q={class:"md:hidden space-y-3"},R={class:"flex justify-between items-start gap-2"},U={class:"font-semibold text-lg break-words"},W={class:"mt-2 text-sm text-gray-700"},X={class:"flex justify-between"},Y={class:"flex justify-between"},Z={class:"flex justify-between"},tt={class:"flex justify-between"},st={class:"flex justify-between"},nt={__name:"Index",props:{ordens:Array,alojamentos:Array,prioridades:Array,filtros:Object},setup(d){const a=d,r=y(!1);function w(){r.value=!1}y({texto:a.filtros?.texto??"",prioridade:a.filtros?.prioridade??""});function b(n){switch(n){case 1:return"bg-blue-100 text-blue-800";case 2:return"bg-yellow-100 text-yellow-800";case 3:return"bg-red-100 text-red-800";case 4:return"bg-green-100 text-green-800";default:return"bg-gray-200 text-gray-700"}}function j(n,e){return n.length>e?n.slice(0,e)+"...":n}return(n,e)=>(l(),p($,null,{header:i(()=>[t("div",F,[e[3]||(e[3]=t("h1",{class:"text-2xl font-semibold"},"Ordens de Serviço",-1)),t("div",D,[u(f(x),{href:"/ordens/finalizadas",class:"px-4 py-2 bg-gray-700 text-white rounded hover:bg-gray-800"},{default:i(()=>[...e[2]||(e[2]=[g(" OS Finalizadas ",-1)])]),_:1}),t("button",{class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:e[0]||(e[0]=s=>r.value=!0)}," Nova OS ")])])]),default:i(()=>[t("div",P,[t("div",E,[t("table",I,[e[4]||(e[4]=t("thead",{class:"bg-gray-300"},[t("tr",null,[t("th",{class:"py-2 px-4 text-left"},"N°"),t("th",{class:"py-2 px-4 text-left"},"Solicitação"),t("th",{class:"py-2 px-4 text-left"},"Condomínio"),t("th",{class:"py-2 px-4 text-left"},"Setor"),t("th",{class:"py-2 px-4 text-left"},"Prioridade"),t("th",{class:"py-2 px-4 text-left"},"Status"),t("th",{class:"py-2 px-4 text-left"},"Solicitante"),t("th",{class:"py-2 px-4 text-left"},"Data")])],-1)),t("tbody",null,[(l(!0),c(_,null,h(a.ordens,s=>(l(),c("tr",{key:s.id,class:"border-b hover:bg-gray-50 cursor-pointer"},[t("td",L,[u(f(x),{href:`/ordens/${s.id}`,class:"text-blue-600 hover:underline"},{default:i(()=>[g(o(s.id),1)]),_:2},1032,["href"])]),t("td",M,o(s.titulo),1),t("td",T,o(s.alojamento?.nome),1),t("td",q,o(s.bloco?.nome),1),t("td",G,[t("span",{class:"px-3 py-1 rounded text-white text-sm",style:m({backgroundColor:s.prioridade?.cor??"#777"})},o(s.prioridade?.nome??"Sem prioridade"),5)]),t("td",H,[t("span",{class:v(`${b(s.status_id)} px-3 py-1 rounded-full text-sm font-semibold`)},o(s.status.nome),3)]),t("td",J,o(s.solicitante?.name??"---"),1),t("td",K,o(s.created_at),1)]))),128))])])]),t("div",Q,[(l(!0),c(_,null,h(a.ordens,s=>(l(),p(f(x),{key:s.id,href:`/ordens/${s.id}`,class:"block bg-white shadow rounded-lg p-4 border active:bg-gray-50"},{default:i(()=>[t("div",R,[t("h2",U,o(j(s.titulo,25)),1),t("span",{class:v(`${b(s.status_id)} px-2 py-1 rounded-full text-xs withespace-nowrap`)},o(s.status.nome),3)]),t("div",W,[t("div",X,[e[5]||(e[5]=t("span",{class:"font-semibold"},"Solicitante:",-1)),t("span",null,o(s.solicitante?.name),1)]),t("div",Y,[e[6]||(e[6]=t("span",{class:"font-semibold"},"Condomínio:",-1)),t("span",null,o(s.alojamento?.nome),1)]),t("div",Z,[e[7]||(e[7]=t("span",{class:"font-semibold"},"Setor:",-1)),t("span",null,o(s.bloco?.nome),1)]),t("div",tt,[e[8]||(e[8]=t("span",{class:"font-semibold"},"Criado em:",-1)),t("span",null,o(s.created_at),1)]),t("div",st,[e[9]||(e[9]=t("span",{class:"font-semibold"},"Prioridade:",-1)),t("span",{class:"px-2 py-0.5 rounded text-white",style:m({backgroundColor:s.prioridade?.cor??"#777"})},o(s.prioridade?.nome??"—"),5)])])]),_:2},1032,["href"]))),128))]),r.value?(l(),p(A,{key:0,onClose:e[1]||(e[1]=s=>r.value=!1)},{default:i(()=>[u(N,{alojamentos:a.alojamentos,prioridades:a.prioridades,onSaved:w},null,8,["alojamentos","prioridades"])]),_:1})):S("",!0)])]),_:1}))}};export{nt as default};
