import{b as d,o as l,a as t,s as j,r as _,c,w as n,d as k,F as b,j as h,e as p,u,l as f,f as g,t as o,x as m,y as v}from"./app-B2ycCGJK.js";import S from"./AppLayout-CvmAqAdw.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import C from"./FormCreateOS-D3AqPszP.js";const N={},A={class:"fixed inset-0 bg-black/50 flex items-center justify-center"},z={class:"bg-white rounded-lg p-6 relative min-w-[400px]"};function B(r,a){return l(),d("div",A,[t("div",z,[t("button",{class:"absolute top-2 right-2 text-gray-600",onClick:a[0]||(a[0]=i=>r.$emit("close"))}," ✖ "),j(r.$slots,"default")])])}const O=$(N,[["render",B]]),V={class:"flex justify-between items-center"},F={class:"flex gap-3"},D={class:"p-6"},P={class:"hidden md:block"},E={class:"w-full bg-white text-black shadow rounded-lg overflow-hidden"},I={class:"py-2 px-4"},L={class:"py-2 px-4"},M={class:"py-2 px-4"},T={class:"py-2 px-4"},q={class:"py-2 px-4"},G={class:"py-2 px-4"},H={class:"py-2 px-4"},J={class:"py-2 px-4"},K={class:"md:hidden space-y-3"},Q={class:"flex justify-between"},R={class:"font-semibold text-lg"},U={class:"mt-2 text-sm text-gray-700"},W={class:"flex justify-between"},X={class:"flex justify-between"},Y={class:"flex justify-between"},Z={class:"flex justify-between"},at={__name:"Index",props:{ordens:Array,alojamentos:Array,prioridades:Array,filtros:Object},setup(r){const a=r,i=_(!1);function w(){i.value=!1}_({texto:a.filtros?.texto??"",prioridade:a.filtros?.prioridade??""});function x(y){switch(y){case 1:return"bg-blue-100 text-blue-800";case 2:return"bg-yellow-100 text-yellow-800";case 3:return"bg-red-100 text-red-800";case 4:return"bg-green-100 text-green-800";default:return"bg-gray-200 text-gray-700"}}return(y,s)=>(l(),c(S,null,{header:n(()=>[t("div",V,[s[3]||(s[3]=t("h1",{class:"text-2xl font-semibold"},"Ordens de Serviço",-1)),t("div",F,[p(u(f),{href:"/ordens/finalizadas",class:"px-4 py-2 bg-gray-700 text-white rounded hover:bg-gray-800"},{default:n(()=>[...s[2]||(s[2]=[g(" OS Finalizadas ",-1)])]),_:1}),t("button",{class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:s[0]||(s[0]=e=>i.value=!0)}," Nova OS ")])])]),default:n(()=>[t("div",D,[t("div",P,[t("table",E,[s[4]||(s[4]=t("thead",{class:"bg-gray-300"},[t("tr",null,[t("th",{class:"py-2 px-4 text-left"},"N°"),t("th",{class:"py-2 px-4 text-left"},"Solicitação"),t("th",{class:"py-2 px-4 text-left"},"Alojamento"),t("th",{class:"py-2 px-4 text-left"},"Setor"),t("th",{class:"py-2 px-4 text-left"},"Prioridade"),t("th",{class:"py-2 px-4 text-left"},"Status"),t("th",{class:"py-2 px-4 text-left"},"Solicitante"),t("th",{class:"py-2 px-4 text-left"},"Data")])],-1)),t("tbody",null,[(l(!0),d(b,null,h(a.ordens,e=>(l(),d("tr",{key:e.id,class:"border-b hover:bg-gray-50 cursor-pointer"},[t("td",I,[p(u(f),{href:`/ordens/${e.id}`,class:"text-blue-600 hover:underline"},{default:n(()=>[g(o(e.id),1)]),_:2},1032,["href"])]),t("td",L,o(e.titulo),1),t("td",M,o(e.alojamento?.nome),1),t("td",T,o(e.bloco?.nome),1),t("td",q,[t("span",{class:"px-3 py-1 rounded text-white text-sm",style:m({backgroundColor:e.prioridade?.cor??"#777"})},o(e.prioridade?.nome??"Sem prioridade"),5)]),t("td",G,[t("span",{class:v(`${x(e.status_id)} px-3 py-1 rounded-full text-sm font-semibold`)},o(e.status.nome),3)]),t("td",H,o(e.solicitante?.name??"---"),1),t("td",J,o(e.created_at),1)]))),128))])])]),t("div",K,[(l(!0),d(b,null,h(a.ordens,e=>(l(),c(u(f),{key:e.id,href:`/ordens/${e.id}`,class:"block bg-white shadow rounded-lg p-4 border active:bg-gray-50"},{default:n(()=>[t("div",Q,[t("h2",R,o(e.titulo),1),t("span",{class:v(`${x(e.status_id)} px-2 py-1 rounded-full text-xs`)},o(e.status.nome),3)]),t("div",U,[t("div",W,[s[5]||(s[5]=t("span",{class:"font-semibold"},"Alojamento:",-1)),t("span",null,o(e.alojamento?.nome),1)]),t("div",X,[s[6]||(s[6]=t("span",{class:"font-semibold"},"Setor:",-1)),t("span",null,o(e.bloco?.nome),1)]),t("div",Y,[s[7]||(s[7]=t("span",{class:"font-semibold"},"Criado em:",-1)),t("span",null,o(e.created_at),1)]),t("div",Z,[s[8]||(s[8]=t("span",{class:"font-semibold"},"Prioridade:",-1)),t("span",{class:"px-2 py-0.5 rounded text-white",style:m({backgroundColor:e.prioridade?.cor??"#777"})},o(e.prioridade?.nome??"—"),5)])])]),_:2},1032,["href"]))),128))]),i.value?(l(),c(O,{key:0,onClose:s[1]||(s[1]=e=>i.value=!1)},{default:n(()=>[p(C,{alojamentos:a.alojamentos,prioridades:a.prioridades,onSaved:w},null,8,["alojamentos","prioridades"])]),_:1})):k("",!0)])]),_:1}))}};export{at as default};
